<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>No Capes</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/kognise/water.css@latest/dist/dark.min.css">
  <!-- <link rel="favicon" href="{{base_url}}/favicon.ico"> -->
</head>
<body>
  <h1 id="name"></h1>
  <p id="description"></p>
  <p id="links"></p>

  <h5>A (non-exhaustive) list of ordinary people who went above and beyond, putting their lives at risk, to help their fellow man</h5>
  <h5>Refresh the page to load a different entry</h5> 
</body>

<script type="text/javascript">
var url = "https://script.google.com/macros/s/AKfycbwceb9Ec0E-lKIztXJCPsUy3vywXrLCvCBYv6V1ELOGFSWKLwI/exec"
fetch(url).then(function (response) {
	// The API call was successful!
	return response.json();
}).then(function(data) {
	var entries = data.entries
	var randomEntry = entries[Math.floor(Math.random() * entries.length)];
	console.log(randomEntry)
	var name = document.getElementById("name")
	name.innerHTML = randomEntry.name
	var description = document.getElementById("description")
	description.innerHTML = randomEntry.description
	var links = document.getElementById("links")
	var linksHtml = "Further reading: <br><ul>"
	for (var i = 0; i < randomEntry.links.length; i++) {
		linksHtml += `<li><a target="_blank" rel="noopener" href=${randomEntry.links[i]}>${randomEntry.links[i]}</a></li>`
	}
	links.innerHTML = linksHtml
}).catch(function (err) {
	// There was an error
	console.warn('Something went wrong.', err);
});
</script>
</html>